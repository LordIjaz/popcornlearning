<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Word Clash - Popcorn Learning</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: black;
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    /* NAVIGATION BAR */
    nav {
      background-color: #222;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      border-bottom: 3px solid #F0C808;
    }
    nav .logo {
      font-size: 24px;
      font-weight: bold;
      color: #F0C808;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 15px;
      margin: 0;
      padding: 0;
    }
    nav ul li {
      display: inline;
    }
    nav ul li a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.3s;
    }
    nav ul li a:hover {
      color: #F0C808;
    }

    header {
      background: linear-gradient(45deg, #007BFF, #F0C808);
      padding: 20px;
      font-size: 32px;
    }
    #gameContainer {
      margin: 40px auto;
      padding: 20px;
      background-color: #1e1e1e;
      max-width: 600px;
      border: 3px solid #F0C808;
      border-radius: 10px;
    }
    .question {
      font-size: 24px;
      margin-bottom: 20px;
    }
    .options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    .option {
      padding: 15px;
      background-color: #333;
      border: 2px solid white;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .option:hover {
      background-color: #007BFF;
    }
    #timer {
      font-size: 22px;
      margin-bottom: 15px;
      color: #F0C808;
    }
    #score {
      font-size: 20px;
      margin-top: 10px;
    }
    .correct {
      background-color: green !important;
    }
    .incorrect {
      background-color: red !important;
    }
    #startBtn {
      padding: 12px 30px;
      font-size: 18px;
      background-color: #F0C808;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      margin-top: 20px;
    }
    #leaderboard {
      margin-top: 40px;
      text-align: left;
      padding: 10px;
      background-color: #2c2c2c;
      border-radius: 10px;
    }
    #leaderboard h2 {
      color: #F0C808;
    }
    .entry {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav>
    <div class="logo">Popcorn Learning</div>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="membership.html">Memberships</a></li>
      <li><a href="courses.html">Courses</a></li>
      <li><a href="maths-game.html">Games</a></li>
    </ul>
  </nav>

  <header>Word Clash</header>

  <div id="gameContainer">
    <div id="timer">Time left: 30s</div>
    <div class="question" id="question">Press Start to begin</div>
    <div class="options" id="options"></div>
    <div id="score">Score: 0</div>
    <button id="startBtn">Start Game</button>
  </div>

  <div id="leaderboard">
    <h2>Leaderboard</h2>
    <div id="leaderboardEntries"></div>
  </div>

  <audio id="correctSound" src="https://www.soundjay.com/button/sounds/button-3.mp3"></audio>
  <audio id="wrongSound" src="https://www.soundjay.com/button/sounds/button-10.mp3"></audio>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <script>
    // Firebase config (replace with your real credentials)
    const firebaseConfig = {
      apiKey: "AIzaSyBNNcj4L1h0M0_Q8PFaE-Up-hyKMxnMvGY", 
      authDomain: "popcornlearning-332a5.firebaseapp.com", 
      projectId: "popcornlearning-332a5", 
      storageBucket: "popcornlearning-332a5.appspot.com", 
      messagingSenderId: "923654716319", 
      appId: "1:923654716319:web:ceb873f28914652b6d1baa", 
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const questions = [
      { word: "Happy", type: "synonym", correct: "Joyful", options: ["Sad", "Angry", "Joyful", "Upset"] },
      { word: "Fast", type: "synonym", correct: "Quick", options: ["Lazy", "Quick", "Slow", "Still"] },
      { word: "Cold", type: "antonym", correct: "Hot", options: ["Freezing", "Chilly", "Hot", "Cool"] },
      { word: "Kind", type: "antonym", correct: "Cruel", options: ["Nice", "Polite", "Helpful", "Cruel"] },
      { word: "Bright", type: "synonym", correct: "Luminous", options: ["Dark", "Dull", "Luminous", "Black"] },
      { word: "Weak", type: "antonym", correct: "Strong", options: ["Feeble", "Tired", "Strong", "Sick"] },
      { word: "Begin", type: "antonym", correct: "End", options: ["Open", "End", "Start", "Play"] },
      { word: "Tiny", type: "synonym", correct: "Miniature", options: ["Huge", "Miniature", "Giant", "Big"] },
      { word: "Brave", type: "antonym", correct: "Cowardly", options: ["Fearless", "Cowardly", "Heroic", "Valiant"] },
      { word: "Quick", type: "synonym", correct: "Rapid", options: ["Slow", "Rapid", "Lazy", "Gentle"] },
      { word: "Strong", type: "synonym", correct: "Powerful", options: ["Weak", "Sick", "Powerful", "Lazy"] },
      { word: "Soft", type: "antonym", correct: "Hard", options: ["Fluffy", "Smooth", "Hard", "Light"] },
      { word: "Smart", type: "synonym", correct: "Intelligent", options: ["Dull", "Intelligent", "Slow", "Simple"] },
      { word: "Late", type: "antonym", correct: "Early", options: ["Slow", "Prompt", "Early", "Tardy"] },
      { word: "Dirty", type: "antonym", correct: "Clean", options: ["Grimy", "Clean", "Filthy", "Stained"] },
      { word: "Funny", type: "synonym", correct: "Humorous", options: ["Sad", "Silly", "Humorous", "Boring"] },
      { word: "Quiet", type: "antonym", correct: "Loud", options: ["Soft", "Silent", "Loud", "Still"] },
      { word: "Sharp", type: "synonym", correct: "Pointed", options: ["Blunt", "Pointed", "Dull", "Flat"] },
      { word: "Old", type: "antonym", correct: "Young", options: ["Elder", "Young", "Ancient", "Senior"] }
    ];

    const questionEl = document.getElementById("question");
    const optionsEl = document.getElementById("options");
    const scoreEl = document.getElementById("score");
    const timerEl = document.getElementById("timer");
    const startBtn = document.getElementById("startBtn");
    const correctSound = document.getElementById("correctSound");
    const wrongSound = document.getElementById("wrongSound");
    const leaderboardEntries = document.getElementById("leaderboardEntries");

    let timer;
    let score = 0;
    let timeLeft = 30;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function startGame() {
      const user = auth.currentUser;
      if (!user || !user.displayName) {
        alert("Please log in with a display name to play.");
        return;
      }

      const username = user.displayName;
      score = 0;
      timeLeft = 30;
      scoreEl.textContent = "Score: 0";
      startBtn.disabled = true;

      nextQuestion();
      timer = setInterval(() => {
        timeLeft--;
        timerEl.textContent = `Time left: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          questionEl.textContent = "⏰ Time's up!";
          optionsEl.innerHTML = "";
          startBtn.disabled = false;
          saveScore(username, score);
        }
      }, 1000);
    }

    function nextQuestion() {
  const q = questions[Math.floor(Math.random() * questions.length)];
  questionEl.textContent = `Select the ${q.type} of "${q.word}"`;
  const opts = [...q.options];
  shuffle(opts);

  optionsEl.innerHTML = "";

  opts.forEach(opt => {
    const btn = document.createElement("div");
    btn.textContent = opt;
    btn.className = "option";
    btn.onclick = () => {
      if (opt === q.correct) {
        correctSound.play();
        score++;
        scoreEl.textContent = `Score: ${score}`;
        btn.classList.add("correct");
      } else {
        wrongSound.play();
        score--;
        scoreEl.textContent = `Score: ${score}`;
        btn.classList.add("incorrect");
      }

      // Disable all buttons after one click
      const allButtons = document.querySelectorAll('.option');
      allButtons.forEach(button => {
        button.onclick = null;  // Disable further clicks
      });

      setTimeout(() => {
        if (timeLeft > 0) nextQuestion();
      }, 600);
    };
    optionsEl.appendChild(btn);
  });
}


    function saveScore(username, score) {
      db.collection("wordClashScores").add({
        username: username,
        score: score,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      }).then(loadLeaderboard);
    }

    function loadLeaderboard() {
      leaderboardEntries.innerHTML = "Loading...";
      db.collection("wordClashScores")
        .orderBy("score", "desc")
        .limit(10)
        .get()
        .then(snapshot => {
          leaderboardEntries.innerHTML = "";
          snapshot.forEach(doc => {
            const data = doc.data();
            const entry = document.createElement("div");
            entry.className = "entry";
            entry.textContent = `${data.username}: ${data.score}`;
            leaderboardEntries.appendChild(entry);
          });
        });
    }

    startBtn.addEventListener("click", startGame);
    window.onload = loadLeaderboard;
  </script>
</body>
</html>
